------------------------------------------------------------------------------------------------------------------------
-- Mount Manager Server
-- Author Morticai - (https://www.coregames.com/user/d1073dbcc404405cbef8ce728e53d380)
-- Date: 2021/3/23
-- Version 0.1.1
------------------------------------------------------------------------------------------------------------------------
-- Require
------------------------------------------------------------------------------------------------------------------------
local MOUNT_LEVELS = script:GetCustomProperty("MountLevels"):WaitForObject()
------------------------------------------------------------------------------------------------------------------------
-- Global Table Setup
------------------------------------------------------------------------------------------------------------------------
local API = {}
_G.MOUNT_SPEED = API

while not _G["Consumables"] do
    Task.Wait()
end

------------------------------------------------------------------------------------------------------------------------
-- Local Functions
------------------------------------------------------------------------------------------------------------------------

local function SetPlayerMountSpeed(player, level)
    local level = level or API.GetLevel(player, API.MOUNT_SPEED) or 1
    local mountSpeed = MOUNT_LEVELS:GetChildren()[level]
    if mountSpeed then
        mountSpeed:ApplyToPlayer(player)
    end
end
------------------------------------------------------------------------------------------------------------------------
-- Global Functions
------------------------------------------------------------------------------------------------------------------------

function OnPlayerJoined(player)
    Task.Wait()
    SetPlayerMountSpeed(player)
end

------------------------------------------------------------------------------------------------------------------------
-- Public API
------------------------------------------------------------------------------------------------------------------------
function API.SetMountSpeed(player, level)
    SetPlayerMountSpeed(player, level)
end
